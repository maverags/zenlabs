â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸš€ SPA AGENT AI - CLOUD DEPLOYMENT GUIDE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Supabase (Database) + Fly.io (API/Agents) Deployment
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ **WHAT YOU'LL BUILD:**

A production-ready, cloud-hosted AI agent system accessible from anywhere:
âœ… PostgreSQL database on Supabase (free tier available)
âœ… FastAPI backend with AI agents on Fly.io (free tier available)
âœ… RESTful API for all operations
âœ… Web dashboard for visualization
âœ… Shareable URL for CEO demos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 1: SUPABASE SETUP (15 minutes)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### Step 1: Create Supabase Project

1. **Go to** https://supabase.com/dashboard
2. **Click** "New Project"
3. **Enter:**
   - Project Name: `spa-agent-ai`
   - Database Password: (create a strong password - SAVE THIS!)
   - Region: Choose closest to you
4. **Click** "Create new project"
5. **Wait** ~2 minutes for project to spin up

### Step 2: Get Connection Details

1. **Click** "Settings" (gear icon) in left sidebar
2. **Click** "Database"
3. **Copy these values:**
   ```
   Host: [your-project].supabase.co
   Database name: postgres
   Port: 5432
   User: postgres
   Password: [your password from Step 1]
   ```
4. **Save these** - you'll need them for Fly.io setup!

### Step 3: Run Database Schema

1. **Click** "SQL Editor" in left sidebar
2. **Click** "New query"
3. **Open** the file: `backend/db/supabase_schema.sql`
4. **Copy entire contents** and paste into SQL Editor
5. **Click** "Run" (or press Cmd/Ctrl + Enter)
6. **Wait** ~30 seconds - should see "Success" message

### Step 4: Load Seed Data

1. **In SQL Editor**, click "New query"
2. **Open** the file: `backend/db/supabase_seed.sql`
3. **Copy entire contents** and paste
4. **Click** "Run"
5. **Verify** data loaded:
   ```sql
   SELECT COUNT(*) FROM customers;
   SELECT COUNT(*) FROM services;
   SELECT COUNT(*) FROM staff;
   ```
   Should see 10 customers, 30 services, 7 staff

### Step 5: Enable Realtime (Optional but Recommended)

1. **Click** "Database" in left sidebar
2. **Click** "Replication"
3. **Enable** replication for tables you want real-time updates
4. **Recommended tables:**
   - appointments
   - sales
   - agent_actions

âœ… **SUPABASE SETUP COMPLETE!**

You now have a fully functional cloud database with:
- 30 professional services
- 7 staff members with schedules
- 16 retail products
- 10 sample customers
- Complete schema with triggers and functions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 2: FLY.IO SETUP (15 minutes)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### Step 1: Install Fly CLI

**Mac/Linux:**
```bash
curl -L https://fly.io/install.sh | sh
```

**Windows (PowerShell):**
```powershell
iwr https://fly.io/install.ps1 -useb | iex
```

### Step 2: Login to Fly.io

```bash
fly auth login
```

Browser will open - complete authentication.

### Step 3: Create Fly.io App

```bash
cd spa-cloud
fly launch --no-deploy
```

**Answer prompts:**
- App name: `spa-agent-ai` (or your choice - must be unique)
- Region: Choose closest to you
- Postgres database: **No** (we're using Supabase)
- Redis: **No**

### Step 4: Set Environment Variables

Set Supabase connection details (use values from Part 1, Step 2):

```bash
fly secrets set \
  SUPABASE_DB_HOST="your-project.supabase.co" \
  SUPABASE_DB_PORT="5432" \
  SUPABASE_DB_USER="postgres" \
  SUPABASE_DB_PASSWORD="your-database-password" \
  SUPABASE_DB_NAME="postgres" \
  ANTHROPIC_API_KEY="your-anthropic-api-key"
```

**Important:** Replace the values with YOUR actual credentials!

### Step 5: Deploy to Fly.io

```bash
fly deploy
```

**Wait** ~3-5 minutes for build and deployment.

### Step 6: Verify Deployment

```bash
fly status
```

Should show "Status: running"

**Test the API:**
```bash
fly open
```

Browser opens to your API. You should see:
```json
{
  "service": "Spa Agent AI API",
  "status": "running",
  "version": "1.0.0"
}
```

**Test health endpoint:**
```bash
curl https://your-app.fly.dev/health
```

Should return:
```json
{
  "status": "healthy",
  "database": "connected"
}
```

âœ… **FLY.IO DEPLOYMENT COMPLETE!**

Your API is now live at: `https://your-app.fly.dev`

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 3: TEST YOUR DEPLOYMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### Test Dashboard Metrics

```bash
curl https://your-app.fly.dev/api/dashboard/metrics
```

**Expected response:**
```json
{
  "today_appointments": 0,
  "today_revenue": 0,
  "active_staff": 7,
  "low_stock_items": 0,
  "at_risk_customers": 2
}
```

### Test Services Endpoint

```bash
curl https://your-app.fly.dev/api/services
```

Should return array of 30 services.

### Test Staff Performance

```bash
curl https://your-app.fly.dev/api/dashboard/staff-performance
```

Should return performance metrics for all 7 staff members.

### Test Customer Endpoints

```bash
curl https://your-app.fly.dev/api/customers
```

Should return 10 sample customers.

```bash
curl https://your-app.fly.dev/api/customers/at-risk
```

Should return customers at risk of churning.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 4: API ENDPOINTS REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### Dashboard Endpoints

```
GET  /api/dashboard/metrics          - Key business metrics
GET  /api/dashboard/daily-sales      - Daily sales summary
GET  /api/dashboard/staff-performance - Staff performance metrics
GET  /api/dashboard/service-performance - Top services
GET  /api/dashboard/low-stock        - Products needing reorder
```

### Customer Endpoints

```
GET  /api/customers                  - List all customers
GET  /api/customers/at-risk          - At-risk customers (churn)
```

### Appointment Endpoints

```
GET  /api/appointments/today         - Today's appointments
GET  /api/appointments/upcoming      - Upcoming appointments
```

### Service Endpoints

```
GET  /api/services                   - List all services
GET  /api/services/categories        - Service categories
```

### Staff Endpoints

```
GET  /api/staff                      - List all staff
GET  /api/staff/{id}/availability    - Staff schedule
```

### Inventory Endpoints

```
GET  /api/inventory/products         - List products
```

### AI Agent Endpoints

```
GET  /api/agents/actions             - Recent agent actions
POST /api/agents/run-analysis        - Trigger agent analysis
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 5: MONITORING & MAINTENANCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### View Logs

```bash
fly logs
```

**Live tail:**
```bash
fly logs -a spa-agent-ai
```

### Check Status

```bash
fly status
```

### Scale Resources (if needed)

**Add more memory:**
```bash
fly scale memory 1024
```

**Add more VMs:**
```bash
fly scale count 2
```

### Update Application

After making code changes:

```bash
fly deploy
```

### Rollback (if needed)

```bash
fly releases
fly deploy --image <previous-version>
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 6: DEMO TO CEO - USING YOUR LIVE API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### Share Your Live Dashboard

Your API is accessible at: `https://your-app.fly.dev`

**Example Dashboard URL:**
```
https://spa-agent-ai.fly.dev/api/dashboard/metrics
```

Anyone can access this URL and see live data!

### Build a Simple Web Dashboard

Create an HTML file:

```html
<!DOCTYPE html>
<html>
<head>
    <title>Spa Agent AI Dashboard</title>
    <script>
        const API_URL = 'https://your-app.fly.dev';
        
        async function loadMetrics() {
            const response = await fetch(`${API_URL}/api/dashboard/metrics`);
            const data = await response.json();
            
            document.getElementById('metrics').innerHTML = `
                <h2>Live Metrics</h2>
                <p>Today's Appointments: ${data.today_appointments}</p>
                <p>Today's Revenue: $${data.today_revenue}</p>
                <p>Active Staff: ${data.active_staff}</p>
                <p>Low Stock Items: ${data.low_stock_items}</p>
                <p>At-Risk Customers: ${data.at_risk_customers}</p>
            `;
        }
        
        loadMetrics();
        setInterval(loadMetrics, 30000); // Update every 30 seconds
    </script>
</head>
<body>
    <h1>Spa Agent AI - Live Dashboard</h1>
    <div id="metrics">Loading...</div>
</body>
</html>
```

Open in browser - you have a live dashboard pulling from your cloud API!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 7: COST BREAKDOWN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### Supabase Free Tier Includes:
âœ… 500 MB database storage
âœ… Up to 2 GB bandwidth
âœ… 50 MB file storage
âœ… Social OAuth providers
âœ… 7-day log retention

**Cost:** $0/month (free tier is generous)

### Fly.io Free Tier Includes:
âœ… 3 shared-cpu VMs
âœ… 160 GB bandwidth
âœ… 3 GB persistent storage

**Cost:** $0/month for this app (well within free tier)

### Anthropic API:
âœ… Claude Sonnet 4: ~$0.03 per analysis
âœ… Estimated: $30-50/month for regular use

**Total Monthly Cost:** ~$30-50 (just AI API calls)

**Compare to:** Local server ($100+/month) or AWS ($200+/month)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PART 8: TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### Issue: Deployment fails

**Check logs:**
```bash
fly logs
```

**Common causes:**
- Missing environment variables
- Database connection issue
- Build errors

**Fix:**
```bash
fly secrets list  # Verify all secrets are set
fly deploy --local-only  # Deploy from local Docker
```

### Issue: Database connection errors

**Verify Supabase is accessible:**
```bash
psql "postgresql://postgres:[password]@[host].supabase.co:5432/postgres"
```

**Check Fly.io secrets:**
```bash
fly secrets list
```

**Re-set if needed:**
```bash
fly secrets set SUPABASE_DB_HOST="correct-host.supabase.co"
```

### Issue: API returns 500 errors

**Check application logs:**
```bash
fly logs --app spa-agent-ai
```

Look for Python exceptions.

### Issue: Out of memory

**Increase VM memory:**
```bash
fly scale memory 1024
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  QUICK REFERENCE COMMANDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**Fly.io:**
```bash
fly status                  # Check app status
fly logs                    # View logs
fly deploy                  # Deploy updates
fly open                    # Open app in browser
fly ssh console             # SSH into VM
fly secrets list            # List environment variables
fly scale memory 1024       # Increase memory
```

**Supabase:**
- Dashboard: https://supabase.com/dashboard
- SQL Editor: For running queries
- Database Settings: For connection details
- API Docs: Auto-generated REST API

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ‰ YOU'RE DONE!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Your AI agent system is now live in the cloud!

**What you have:**
âœ… Production database on Supabase
âœ… Live API on Fly.io with multiple endpoints
âœ… 30 services, 7 staff, sample data all loaded
âœ… Shareable URL: https://your-app.fly.dev
âœ… Health monitoring and auto-scaling
âœ… Zero local setup needed - 100% cloud

**Next steps:**
1. Access API endpoints to integrate with frontend
2. Build web dashboard using the API
3. Add AI agent workflows
4. Demo to CEO with live, shareable URL!

**Your live API:** https://your-app.fly.dev
**Supabase Dashboard:** https://supabase.com/dashboard

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
